<!DOCTYPE html>
<html>
<head>
    <title>AHB - 3PG Model</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="shortcut icon" sizes="196x196" href="images/logo_196.png">
    <link rel="shortcut icon" sizes="128x128" href="images/logo_128.png">
    <link rel="apple-touch-icon" sizes="128x128" href="images/logo_128.png">
    <link rel="apple-touch-icon-precomposed" sizes="128x128" href="images/logo_128.png">

	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="css/font-awesome.css" />
	<link rel="stylesheet" type="text/css" href="css/style.css" />
	<link rel="stylesheet" type="text/css" href="css/owl.carousel.css" />
	<link rel="stylesheet" type="text/css" href="css/owl.theme.css" />

	<script type="text/javascript">
	
		var app = {
			spreadsheet : {
				id : "0AmgH34NLQLU-dHA0QkViSnE2WV9tZGdXX2JRVC1ISEE",
				worksheets : {
					metadata : 0,
					constants : 19
				},
				dataTables : {}
			},
			inputs : {
				weather : ["month","tmin","tmax","tdmean","ppt","rad","daylight"]
			},
			outputs : ["VPD","fVPD","fT","fFrost","PAR","xPP","Intcptn","ASW","CumIrrig",
			           "Irrig","StandAge","LAI","CanCond","Transp","fSW","fAge",
			           "PhysMod","pR","pS","litterfall","NPP","WF","WR","WS","W"],
			debug : false,
			devmode : false
		};
	</script>
	
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/charts.js"></script>
	<script src="js/app.js"></script>
	<script src="js/gdrive.js"></script>
	<script src="js/inputForm.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script src="https://apis.google.com/js/client.js"></script>
	<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
	
	
</head>
<body>

    <div style="text-align:center;margin-top:25px;font-size:18px">
        <div><i class="icon-spinner icon-spin"></i> Loading...</div>
        <div><img src="images/logo_196.png" style="margin:20px 0;box-shadow:0 0 5px #bbb;border-radius:8px;border:1px solid #ccc" /></div>
    	<div id="status" style="font-size:14px"></div>
    </div>


	<script type="text/javascript">

		$("#status").html("Visualization package");
		google.load('visualization', '1.0', {'packages':['corechart','annotatedtimeline']});
		google.setOnLoadCallback(function(){
			$("#status").html("3pg model");
			
			var version = qs("version");
			var devmode = qs("devmode");
			if( devmode ) app.devmode = true;
			
			app.loadModelCode(version, function(){
				$("#status").html("3pg data");
				app.loadSpreadsheetData(function(){
					$("body").html("").load("app.html", function(){
						app.init(function(){
							app.gdrive.init(function(){
								var file = qs("file");
								if( file ) app.gdrive.load(file);
								
								// see if we are loading for google drive
								var state = qs("state");
								if( state ) {
									state = JSON.parse(state);
									app.gdrive.load(state.ids[0]);
								}
							});
						});
					});
				});
			});
		});
		
		// override the log function
		log = function(msg) {
			if( app.debug ) console.log(msg);
		};
	</script>
</body>
</html>
