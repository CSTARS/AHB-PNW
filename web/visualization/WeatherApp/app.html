<!DOCTYPE html>
<html>
<head>
	
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	
	<link href="css/bootstrap.css" rel="stylesheet">
	<link href="css/bootstrap-responsive.css" rel="stylesheet">
	<link href="css/font-awesome.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">

	<!-- Libraries -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="jslib/bootstrap.min.js"></script>
	<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart','table']});
    </script>
	

	
	<script type="text/javascript">
		var ahb = {
			type : "weather",
			irType : "Irrigated"
		};
	      $(window).ready(function(){
	    	 $("#type-selector button").on('click',function(e){
	    		 var id = this.id.replace(/type-/, '');
	    		 
	    		 // TODO: update this name in entire app
	    		 if( id = "3PG" ) id = "weather";
	    		 
	    		 if( id == ahb.type ) return;
	    		 ahb.type = id;
	    		 
	    		 if( id != "weather" ) {
	    			 $("#outer-poplar-chart-panel").hide();
	    			 $("#poplar-selector").hide();
	    		 } else {
	    			 $("#poplar-chart-panel").show();
	    			 $("#outer-poplar-chart-panel").show();
	    			 $("#poplar-selector").show();
	    		 }
	    		 
	    		 $(window).trigger('change-type-event',[]);
	    		 
	    		 setTimeout(function(){
	    			 $(window).trigger('resize',[]);
	    		 },300);
	    		
	    		 
	    	 });
	    	 $("#poplar-selector button").on('click',function(e){
	    		ahb.irType = $(this).html();
	    		$(window).trigger('change-irtype-event',[]);
	    	 });
	    	 
	    	 $(window).resize(_resize());
	    	 _resize();
	    	 
	    	 ahb.map.init();
	    	 ahb.search.init();
	    	 ahb.chart.init();
	    	 
	    	 function _resize() {
	    		 if($(window).width() < 765) {
	    			 $(".search-big").hide();
	    			 $(".search-small").show();
	    		 } else {
	    			 $(".search-big").show();
	    			 $(".search-small").hide();
	    		 }
	    	 }
	      });
    </script>
    <script type="text/javascript" src="js/map.js"></script>
	<script type="text/javascript" src="js/search.js"></script>
	<script type="text/javascript" src="js/chart.js"></script>
    
</head>
<body>
	
<!-- TITLE BAR -->
<div class="navbar navbar-inverse">
   <div class="navbar-inner">
     <div class="container">
       <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="brand">AHB-PNW</a>
     </div>
   </div>
</div>
<!-- END TITLE BAR -->

<div>
	<div id="search-panel" style="position:relative;padding:10px">
		<div class="row-fluid">
			<div class="span6">
				<div class="form-search">
				  <input type="text" id="search-text" class="input-medium search-query" placeholder="Find Location" style='width: 150px'>&nbsp;&nbsp;
				  <button id="search-button" class="btn search-big"><i class="icon-search"></i>&nbsp;Search</button>&nbsp;&nbsp;
				  <button id="locate-button" class="btn search-big"><i class="icon-screenshot"></i>&nbsp;Locate Me</button>
				  <a id="search-button-small" class="btn btn-small search-small"><i class="icon-search"></i></a>&nbsp;&nbsp;
				  <a id="locate-button-small" class="btn btn-small search-small"><i class="icon-screenshot"></i></a>
				</div>
				<div class="well" id="search-results" style="display:none;margin-top:20px"></div>
			</div>
			<div class="span6">
				<div id="type-selector" class="btn-group pull-right"  data-toggle="buttons-radio" style="margin-top:5px">
				  <button id="type-weather" type="button" class="btn btn-primary active"><i class="icon-leaf"></i>&nbsp;3PG</button>
				  <button id="type-price" type="button" class="btn btn-primary"><i class="icon-money"></i>&nbsp;Price</button>
				</div>
				<div id="poplar-selector" class="btn-group pull-right"  data-toggle="buttons-radio" style="margin-top:5px;margin-right:10px">
				  <button id="poplar-irrigated" type="button" class="btn btn-primary active">Irrigated</button>
				  <button id="poplar-nonirriagated" type="button" class="btn btn-primary">Nonirrigated</button>
				</div>
			</div>
		</div>
	</div>
</div>

<div style="padding:5px">
	<div class="row-fluid" >
		<div class="span6" id="map-outer">
			<div id="map" class="outer-map-panel" style="height:400px;width:400px;margin-bottom:5px"></div>
		</div>
		<div class="span6" id="outer-chart-panel" style="display:none">
			<div id="chart-panel" class="chart-panel" style="margin-bottom:10px;height:400px"></div>
			<div id="download-panel" style="height:40px;"></div>		
		</div>
	</div>
	<div class="row-fluid" id="bottom-charts" style="visibility:hidden">
		<div class="span6" id="outer-weather-chart-panel">
			<div id="weather-chart-panel" class="chart-panel" style="margin-bottom:10px;height:400px"></div>
			<div id="weather-download-panel" ></div>
		</div>
		<div class="span6" id="outer-soil-chart-panel">
			<div class="chart-panel" style="margin-bottom:10px">
				<h4>Soil</h4>
				<div id="soil-chart-panel"></div>
			</div>
			<div id="soil-download-panel" ></div>
		</div>
	</div>
</div>

</body>
</html>